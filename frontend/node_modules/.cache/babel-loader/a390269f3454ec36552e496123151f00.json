{"ast":null,"code":"var _jsxFileName = \"V:\\\\Programming\\\\Python\\\\PyCharm\\\\PyCharmProjects\\\\Microservices_MMT\\\\frontend\\\\src\\\\pages\\\\DiscountSettings.js\";\nimport React, { useEffect, useState } from 'react';\nexport default function DiscountSettings() {\n  const [months, setMonths] = useState('');\n  const [discount, setDiscount] = useState('');\n  const [existingDiscount, setExistingDiscount] = useState(null);\n  const [message, setMessage] = useState('');\n  const API_URL = 'http://localhost:5003/admin/discount';\n\n  // Fetch discount on load\n  useEffect(() => {\n    fetchDiscount();\n  }, []);\n  const fetchDiscount = async () => {\n    try {\n      const res = await fetch(API_URL);\n      const data = await res.json();\n      if (data.months && data.discount !== undefined) {\n        setExistingDiscount(data);\n      } else {\n        setExistingDiscount(null);\n      }\n    } catch (err) {\n      console.error(\"Error fetching discount:\", err);\n    }\n  };\n  const handleSave = async () => {\n    const monthList = months.split(',').map(m => parseInt(m.trim())).filter(m => !isNaN(m));\n    const validMonths = monthList.every(m => m >= 1 && m <= 12);\n    const validDiscount = discount > 0 && discount <= 100;\n    if (!validMonths) {\n      setMessage(\"Invalid months! Use numbers between 1-12.\");\n      return;\n    }\n    if (!validDiscount) {\n      setMessage(\"Discount should be between 1% and 100%\");\n      return;\n    }\n    const payload = {\n      months: monthList,\n      discount: parseInt(discount)\n    };\n    try {\n      const res = await fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const result = await res.json();\n      setMessage(result.message);\n      fetchDiscount(); // refresh\n      setMonths('');\n      setDiscount('');\n    } catch (err) {\n      console.error(\"Error saving discount:\", err);\n      setMessage(\"Failed to save discount.\");\n    }\n  };\n  const handleDelete = async () => {\n    try {\n      await fetch(API_URL + '/delete', {\n        method: 'DELETE'\n      }); // Assuming you’ll add this route\n      setExistingDiscount(null);\n      setMessage(\"Discount deleted.\");\n    } catch (err) {\n      console.error(\"Error deleting discount:\", err);\n      setMessage(\"Failed to delete.\");\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-3xl font-bold mb-6 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, \"Seasonal Discount Settings\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-wrap gap-4 mb-6 items-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Discount Months (e.g. 4,6,12)\",\n    value: months,\n    onChange: e => setMonths(e.target.value),\n    className: \"border p-2 rounded w-1/3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    placeholder: \"Discount %\",\n    value: discount,\n    onChange: e => setDiscount(e.target.value),\n    className: \"border p-2 rounded w-1/4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSave,\n    className: \"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, \"Save Discount\")), message && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-4 text-blue-600 font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 19\n    }\n  }, message), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-8 border-t pt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"text-xl font-semibold mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, \"Current Discount:\"), existingDiscount ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-gray-100 p-4 rounded shadow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 16\n    }\n  }, \"Months:\"), \" \", existingDiscount.months.join(', ')), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 16\n    }\n  }, \"Discount:\"), \" \", existingDiscount.discount, \"%\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleDelete,\n    className: \"mt-4 bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, \"Delete Discount\")) : /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, \"No seasonal discount set.\")));\n}","map":{"version":3,"names":["React","useEffect","useState","DiscountSettings","months","setMonths","discount","setDiscount","existingDiscount","setExistingDiscount","message","setMessage","API_URL","fetchDiscount","res","fetch","data","json","undefined","err","console","error","handleSave","monthList","split","map","m","parseInt","trim","filter","isNaN","validMonths","every","validDiscount","payload","method","headers","body","JSON","stringify","result","handleDelete","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","join"],"sources":["V:/Programming/Python/PyCharm/PyCharmProjects/Microservices_MMT/frontend/src/pages/DiscountSettings.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nexport default function DiscountSettings() {\r\n  const [months, setMonths] = useState('');\r\n  const [discount, setDiscount] = useState('');\r\n  const [existingDiscount, setExistingDiscount] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n\r\n  const API_URL = 'http://localhost:5003/admin/discount';\r\n\r\n  // Fetch discount on load\r\n  useEffect(() => {\r\n    fetchDiscount();\r\n  }, []);\r\n\r\n  const fetchDiscount = async () => {\r\n    try {\r\n      const res = await fetch(API_URL);\r\n      const data = await res.json();\r\n      if (data.months && data.discount !== undefined) {\r\n        setExistingDiscount(data);\r\n      } else {\r\n        setExistingDiscount(null);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error fetching discount:\", err);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const monthList = months\r\n      .split(',')\r\n      .map(m => parseInt(m.trim()))\r\n      .filter(m => !isNaN(m));\r\n\r\n    const validMonths = monthList.every(m => m >= 1 && m <= 12);\r\n    const validDiscount = discount > 0 && discount <= 100;\r\n\r\n    if (!validMonths) {\r\n      setMessage(\"Invalid months! Use numbers between 1-12.\");\r\n      return;\r\n    }\r\n\r\n    if (!validDiscount) {\r\n      setMessage(\"Discount should be between 1% and 100%\");\r\n      return;\r\n    }\r\n\r\n    const payload = {\r\n      months: monthList,\r\n      discount: parseInt(discount)\r\n    };\r\n\r\n    try {\r\n      const res = await fetch(API_URL, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n\r\n      const result = await res.json();\r\n      setMessage(result.message);\r\n      fetchDiscount(); // refresh\r\n      setMonths('');\r\n      setDiscount('');\r\n    } catch (err) {\r\n      console.error(\"Error saving discount:\", err);\r\n      setMessage(\"Failed to save discount.\");\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await fetch(API_URL + '/delete', { method: 'DELETE' }); // Assuming you’ll add this route\r\n      setExistingDiscount(null);\r\n      setMessage(\"Discount deleted.\");\r\n    } catch (err) {\r\n      console.error(\"Error deleting discount:\", err);\r\n      setMessage(\"Failed to delete.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h2 className=\"text-3xl font-bold mb-6 text-center\">Seasonal Discount Settings</h2>\r\n\r\n      <div className=\"flex flex-wrap gap-4 mb-6 items-end\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Discount Months (e.g. 4,6,12)\"\r\n          value={months}\r\n          onChange={e => setMonths(e.target.value)}\r\n          className=\"border p-2 rounded w-1/3\"\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          placeholder=\"Discount %\"\r\n          value={discount}\r\n          onChange={e => setDiscount(e.target.value)}\r\n          className=\"border p-2 rounded w-1/4\"\r\n        />\r\n        <button\r\n          onClick={handleSave}\r\n          className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\r\n        >\r\n          Save Discount\r\n        </button>\r\n      </div>\r\n\r\n      {message && <p className=\"mb-4 text-blue-600 font-semibold\">{message}</p>}\r\n\r\n      <div className=\"mt-8 border-t pt-4\">\r\n        <h3 className=\"text-xl font-semibold mb-2\">Current Discount:</h3>\r\n        {existingDiscount ? (\r\n          <div className=\"bg-gray-100 p-4 rounded shadow\">\r\n            <p><strong>Months:</strong> {existingDiscount.months.join(', ')}</p>\r\n            <p><strong>Discount:</strong> {existingDiscount.discount}%</p>\r\n            <button\r\n              onClick={handleDelete}\r\n              className=\"mt-4 bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600\"\r\n            >\r\n              Delete Discount\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <p className=\"text-gray-500\">No seasonal discount set.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}