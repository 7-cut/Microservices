{"ast":null,"code":"var _jsxFileName = \"V:\\\\Programming\\\\Python\\\\PyCharm\\\\PyCharmProjects\\\\Microservices_MMT\\\\frontend\\\\src\\\\pages\\\\DiscountSettings.js\";\nimport React, { useEffect, useState } from 'react';\nexport default function DiscountSettings() {\n  const [discount, setDiscount] = useState(null); // to store current seasonal discount value\n  const [months, setMonths] = useState([]); // to store current discount months\n  const [inputs, setInputs] = useState({\n    discount: '',\n    months: ''\n  }); // to control input fields\n  const [message, setMessage] = useState(''); // for success or error messages\n  const API_URL = 'http://localhost:5003/admin/discount';\n\n  // Fetch current discount settings on mount\n  useEffect(() => {\n    fetchDiscountSettings();\n  }, []);\n  const fetchDiscountSettings = async () => {\n    try {\n      const res = await fetch(API_URL);\n      const data = await res.json();\n      if (data.months && data.discount) {\n        setMonths(data.months);\n        setDiscount(data.discount);\n      } else {\n        setMessage(data.message || \"No seasonal discount set yet\");\n      }\n    } catch (err) {\n      setMessage(\"Failed to load discount settings\");\n      console.error(\"Error fetching discount settings:\", err);\n    }\n  };\n  const handleInputChange = (field, value) => {\n    setInputs(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const handleAddDiscount = async () => {\n    const {\n      discount,\n      months\n    } = inputs;\n    if (!discount || !months) {\n      alert('All fields are required!');\n      return;\n    }\n    const newDiscount = {\n      discount: Number(discount),\n      months: months.split(',').map(m => parseInt(m.trim(), 10))\n    };\n    try {\n      const res = await fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newDiscount)\n      });\n      if (res.ok) {\n        setMessage(\"New seasonal discount added successfully!\");\n        fetchDiscountSettings(); // Refresh discount settings after adding\n        setInputs({\n          discount: '',\n          months: ''\n        });\n      } else {\n        setMessage(\"Failed to add new discount\");\n      }\n    } catch (err) {\n      setMessage(\"Error adding new discount\");\n      console.error(\"Error adding discount:\", err);\n    }\n  };\n  const handleUpdateDiscount = async () => {\n    const {\n      discount,\n      months\n    } = inputs;\n    if (!discount || !months) {\n      alert('All fields are required!');\n      return;\n    }\n    const updatedDiscount = {\n      discount: Number(discount),\n      months: months.split(',').map(m => parseInt(m.trim(), 10))\n    };\n    try {\n      const res = await fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(updatedDiscount)\n      });\n      if (res.ok) {\n        setMessage(\"Seasonal discount updated successfully!\");\n        fetchDiscountSettings(); // Refresh after update\n      } else {\n        setMessage(\"Failed to update discount\");\n      }\n    } catch (err) {\n      setMessage(\"Error updating discount\");\n      console.error(\"Error updating discount:\", err);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-3xl font-bold mb-6 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, \"Discount Settings\"), discount !== null ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-4 text-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, \"Current Seasonal Discount: \", discount, \"%\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-4 text-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, \"Applicable Months: \", months.join(', '))) : /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mb-4 text-lg text-red-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, message), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-wrap gap-4 mb-10 items-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    placeholder: \"Seasonal Discount Percentage\",\n    value: inputs.discount || '',\n    onChange: e => handleInputChange('discount', e.target.value),\n    className: \"border p-2 rounded w-1/5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Seasonal Discount Months (comma-separated)\",\n    value: inputs.months || '',\n    onChange: e => handleInputChange('months', e.target.value),\n    className: \"border p-2 rounded w-1/5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: discount ? handleUpdateDiscount : handleAddDiscount,\n    className: \"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, discount ? 'Update Discount' : 'Add Discount')), message && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mt-4 text-red-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 19\n    }\n  }, message));\n}","map":{"version":3,"names":["React","useEffect","useState","DiscountSettings","discount","setDiscount","months","setMonths","inputs","setInputs","message","setMessage","API_URL","fetchDiscountSettings","res","fetch","data","json","err","console","error","handleInputChange","field","value","prev","handleAddDiscount","alert","newDiscount","Number","split","map","m","parseInt","trim","method","headers","body","JSON","stringify","ok","handleUpdateDiscount","updatedDiscount","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Fragment","join","type","placeholder","onChange","e","target","onClick"],"sources":["V:/Programming/Python/PyCharm/PyCharmProjects/Microservices_MMT/frontend/src/pages/DiscountSettings.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nexport default function DiscountSettings() {\r\n  const [discount, setDiscount] = useState(null); // to store current seasonal discount value\r\n  const [months, setMonths] = useState([]); // to store current discount months\r\n  const [inputs, setInputs] = useState({ discount: '', months: '' }); // to control input fields\r\n  const [message, setMessage] = useState(''); // for success or error messages\r\n  const API_URL = 'http://localhost:5003/admin/discount';\r\n\r\n  // Fetch current discount settings on mount\r\n  useEffect(() => {\r\n    fetchDiscountSettings();\r\n  }, []);\r\n\r\n  const fetchDiscountSettings = async () => {\r\n    try {\r\n      const res = await fetch(API_URL);\r\n      const data = await res.json();\r\n\r\n      if (data.months && data.discount) {\r\n        setMonths(data.months);\r\n        setDiscount(data.discount);\r\n      } else {\r\n        setMessage(data.message || \"No seasonal discount set yet\");\r\n      }\r\n    } catch (err) {\r\n      setMessage(\"Failed to load discount settings\");\r\n      console.error(\"Error fetching discount settings:\", err);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setInputs(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleAddDiscount = async () => {\r\n    const { discount, months } = inputs;\r\n    if (!discount || !months) {\r\n      alert('All fields are required!');\r\n      return;\r\n    }\r\n\r\n    const newDiscount = {\r\n      discount: Number(discount),\r\n      months: months.split(',').map(m => parseInt(m.trim(), 10)),\r\n    };\r\n\r\n    try {\r\n      const res = await fetch(API_URL, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(newDiscount),\r\n      });\r\n\r\n      if (res.ok) {\r\n        setMessage(\"New seasonal discount added successfully!\");\r\n        fetchDiscountSettings(); // Refresh discount settings after adding\r\n        setInputs({ discount: '', months: '' });\r\n      } else {\r\n        setMessage(\"Failed to add new discount\");\r\n      }\r\n    } catch (err) {\r\n      setMessage(\"Error adding new discount\");\r\n      console.error(\"Error adding discount:\", err);\r\n    }\r\n  };\r\n\r\n  const handleUpdateDiscount = async () => {\r\n    const { discount, months } = inputs;\r\n    if (!discount || !months) {\r\n      alert('All fields are required!');\r\n      return;\r\n    }\r\n\r\n    const updatedDiscount = {\r\n      discount: Number(discount),\r\n      months: months.split(',').map(m => parseInt(m.trim(), 10)),\r\n    };\r\n\r\n    try {\r\n      const res = await fetch(API_URL, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(updatedDiscount),\r\n      });\r\n\r\n      if (res.ok) {\r\n        setMessage(\"Seasonal discount updated successfully!\");\r\n        fetchDiscountSettings(); // Refresh after update\r\n      } else {\r\n        setMessage(\"Failed to update discount\");\r\n      }\r\n    } catch (err) {\r\n      setMessage(\"Error updating discount\");\r\n      console.error(\"Error updating discount:\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h2 className=\"text-3xl font-bold mb-6 text-center\">Discount Settings</h2>\r\n\r\n      {/* Display current discount if available */}\r\n      {discount !== null ? (\r\n        <>\r\n          <p className=\"mb-4 text-lg\">Current Seasonal Discount: {discount}%</p>\r\n          <p className=\"mb-4 text-lg\">Applicable Months: {months.join(', ')}</p>\r\n        </>\r\n      ) : (\r\n        <p className=\"mb-4 text-lg text-red-500\">{message}</p>\r\n      )}\r\n\r\n      {/* Add/Update Discount Form */}\r\n      <div className=\"flex flex-wrap gap-4 mb-10 items-end\">\r\n        <input\r\n          type=\"number\"\r\n          placeholder=\"Seasonal Discount Percentage\"\r\n          value={inputs.discount || ''}\r\n          onChange={(e) => handleInputChange('discount', e.target.value)}\r\n          className=\"border p-2 rounded w-1/5\"\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Seasonal Discount Months (comma-separated)\"\r\n          value={inputs.months || ''}\r\n          onChange={(e) => handleInputChange('months', e.target.value)}\r\n          className=\"border p-2 rounded w-1/5\"\r\n        />\r\n        <button\r\n          onClick={discount ? handleUpdateDiscount : handleAddDiscount}\r\n          className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n        >\r\n          {discount ? 'Update Discount' : 'Add Discount'}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Success/Error Message */}\r\n      {message && <p className=\"mt-4 text-red-500\">{message}</p>}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}