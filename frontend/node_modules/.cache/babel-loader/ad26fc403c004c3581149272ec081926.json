{"ast":null,"code":"var _jsxFileName = \"V:\\\\Programming\\\\Python\\\\PyCharm\\\\PyCharmProjects\\\\Microservices_MMT\\\\frontend\\\\src\\\\pages\\\\DiscountSettings.js\";\nimport React, { useEffect, useState } from 'react';\nexport default function DiscountSettings() {\n  const [discounts, setDiscounts] = useState(null);\n  const [inputs, setInputs] = useState({\n    months: [],\n    discount: ''\n  });\n  const API_URL = 'http://localhost:5003/admin/discount';\n\n  // Fetch discounts from backend on mount\n  useEffect(() => {\n    fetchDiscounts();\n  }, []);\n  const fetchDiscounts = async () => {\n    try {\n      const res = await fetch(API_URL);\n      const data = await res.json();\n      if (data.months) {\n        setDiscounts(data);\n        setInputs({\n          months: data.months,\n          discount: data.discount\n        });\n      }\n    } catch (err) {\n      console.error(\"Error fetching discounts:\", err);\n    }\n  };\n  const handleInputChange = (field, value) => {\n    setInputs(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const handleUpdateDiscount = async () => {\n    const {\n      months,\n      discount\n    } = inputs;\n    if (!months || months.length === 0 || !discount) {\n      alert('All fields are required!');\n      return;\n    }\n    try {\n      const res = await fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          months,\n          discount: Number(discount)\n        })\n      });\n      if (res.ok) {\n        fetchDiscounts(); // Refresh discounts after update\n        alert(\"Discount updated successfully!\");\n      } else {\n        alert(\"Failed to update discount.\");\n      }\n    } catch (err) {\n      console.error(\"Error updating discount:\", err);\n    }\n  };\n  const handleDeleteDiscount = async () => {\n    try {\n      const res = await fetch(API_URL, {\n        method: 'DELETE'\n      });\n      if (res.ok) {\n        setDiscounts(null);\n        alert(\"Discount deleted successfully!\");\n      } else {\n        alert(\"Failed to delete discount.\");\n      }\n    } catch (err) {\n      console.error(\"Error deleting discount:\", err);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-3xl font-bold mb-6 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, \"Discount Settings\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-wrap gap-4 mb-10 items-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Months (comma separated)\",\n    value: inputs.months.join(', ') || '',\n    onChange: e => handleInputChange('months', e.target.value.split(',').map(m => m.trim())),\n    className: \"border p-2 rounded w-1/5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    placeholder: \"Discount %\",\n    value: inputs.discount || '',\n    onChange: e => handleInputChange('discount', e.target.value),\n    className: \"border p-2 rounded w-1/5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleUpdateDiscount,\n    className: \"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, \"Update Discount\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleDeleteDiscount,\n    className: \"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, \"Delete Discount\")), discounts && discounts.months ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"overflow-x-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"min-w-full bg-white border border-gray-200 text-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"bg-gray-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-4 py-2 border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }, \"Months\"), /*#__PURE__*/React.createElement(\"th\", {\n    className: \"px-4 py-2 border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, \"Discount\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"px-4 py-2 border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, discounts.months.join(', ')), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"px-4 py-2 border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, discounts.discount, \"%\"))))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center text-gray-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, \"No seasonal discount set yet.\"));\n}","map":{"version":3,"names":["React","useEffect","useState","DiscountSettings","discounts","setDiscounts","inputs","setInputs","months","discount","API_URL","fetchDiscounts","res","fetch","data","json","err","console","error","handleInputChange","field","value","prev","handleUpdateDiscount","length","alert","method","headers","body","JSON","stringify","Number","ok","handleDeleteDiscount","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","join","onChange","e","target","split","map","m","trim","onClick"],"sources":["V:/Programming/Python/PyCharm/PyCharmProjects/Microservices_MMT/frontend/src/pages/DiscountSettings.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nexport default function DiscountSettings() {\r\n  const [discounts, setDiscounts] = useState(null);\r\n  const [inputs, setInputs] = useState({ months: [], discount: '' });\r\n  const API_URL = 'http://localhost:5003/admin/discount';\r\n\r\n  // Fetch discounts from backend on mount\r\n  useEffect(() => {\r\n    fetchDiscounts();\r\n  }, []);\r\n\r\n  const fetchDiscounts = async () => {\r\n    try {\r\n      const res = await fetch(API_URL);\r\n      const data = await res.json();\r\n      if (data.months) {\r\n        setDiscounts(data);\r\n        setInputs({\r\n          months: data.months,\r\n          discount: data.discount,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error fetching discounts:\", err);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setInputs(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleUpdateDiscount = async () => {\r\n    const { months, discount } = inputs;\r\n    if (!months || months.length === 0 || !discount) {\r\n      alert('All fields are required!');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(API_URL, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ months, discount: Number(discount) })\r\n      });\r\n\r\n      if (res.ok) {\r\n        fetchDiscounts(); // Refresh discounts after update\r\n        alert(\"Discount updated successfully!\");\r\n      } else {\r\n        alert(\"Failed to update discount.\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error updating discount:\", err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteDiscount = async () => {\r\n    try {\r\n      const res = await fetch(API_URL, {\r\n        method: 'DELETE',\r\n      });\r\n\r\n      if (res.ok) {\r\n        setDiscounts(null);\r\n        alert(\"Discount deleted successfully!\");\r\n      } else {\r\n        alert(\"Failed to delete discount.\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error deleting discount:\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h2 className=\"text-3xl font-bold mb-6 text-center\">Discount Settings</h2>\r\n\r\n      {/* Update Discount Form */}\r\n      <div className=\"flex flex-wrap gap-4 mb-10 items-end\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Months (comma separated)\"\r\n          value={inputs.months.join(', ') || ''}\r\n          onChange={(e) => handleInputChange('months', e.target.value.split(',').map(m => m.trim()))}\r\n          className=\"border p-2 rounded w-1/5\"\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          placeholder=\"Discount %\"\r\n          value={inputs.discount || ''}\r\n          onChange={(e) => handleInputChange('discount', e.target.value)}\r\n          className=\"border p-2 rounded w-1/5\"\r\n        />\r\n        <button\r\n          onClick={handleUpdateDiscount}\r\n          className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n        >\r\n          Update Discount\r\n        </button>\r\n        <button\r\n          onClick={handleDeleteDiscount}\r\n          className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700\"\r\n        >\r\n          Delete Discount\r\n        </button>\r\n      </div>\r\n\r\n      {/* Discount Table */}\r\n      {discounts && discounts.months ? (\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full bg-white border border-gray-200 text-left\">\r\n            <thead className=\"bg-gray-100\">\r\n              <tr>\r\n                <th className=\"px-4 py-2 border\">Months</th>\r\n                <th className=\"px-4 py-2 border\">Discount</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td className=\"px-4 py-2 border\">{discounts.months.join(', ')}</td>\r\n                <td className=\"px-4 py-2 border\">{discounts.discount}%</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center text-gray-500\">\r\n          No seasonal discount set yet.\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}