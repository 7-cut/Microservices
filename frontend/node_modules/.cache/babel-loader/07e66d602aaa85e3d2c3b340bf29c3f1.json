{"ast":null,"code":"var _jsxFileName = \"V:\\\\Programming\\\\Python\\\\PyCharm\\\\PyCharmProjects\\\\Microservices_MMT\\\\frontend\\\\src\\\\pages\\\\DiscountSettings.js\";\nimport React, { useEffect, useState } from 'react';\nexport default function DiscountSettings() {\n  const [months, setMonths] = useState([]);\n  const [discount, setDiscount] = useState(null);\n  const [message, setMessage] = useState('');\n  const [isNewDiscount, setIsNewDiscount] = useState(false);\n  const API_URL = 'http://localhost:5003/admin/discount';\n\n  // Fetch discount settings on mount\n  useEffect(() => {\n    fetchDiscountSettings();\n  }, []);\n  const fetchDiscountSettings = async () => {\n    try {\n      const res = await fetch(API_URL);\n      const data = await res.json();\n      if (data.message) {\n        setMessage(data.message); // No discount set yet\n      } else {\n        setMonths(data.months || []);\n        setDiscount(data.discount || null);\n      }\n    } catch (err) {\n      console.error(\"Error fetching discount settings:\", err);\n      setMessage('Error fetching discount settings.');\n    }\n  };\n  const handleInputChange = (field, value) => {\n    if (field === 'months') {\n      setMonths(value.split(',').map(month => parseInt(month.trim(), 10)));\n    } else if (field === 'discount') {\n      setDiscount(value);\n    }\n  };\n  const handleSaveDiscount = async () => {\n    if (!months.length || !discount) {\n      alert('All fields are required');\n      return;\n    }\n    const discountData = {\n      months,\n      discount: Number(discount)\n    };\n    try {\n      const res = await fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(discountData)\n      });\n      const data = await res.json();\n      if (res.ok) {\n        setMessage(data.message);\n        setMonths(data.months);\n        setDiscount(data.discount);\n        setIsNewDiscount(false);\n      } else {\n        setMessage(data.error || 'Failed to update discount');\n      }\n    } catch (err) {\n      console.error('Error saving discount:', err);\n      setMessage('Error saving discount');\n    }\n  };\n  const handleDeleteDiscount = async () => {\n    try {\n      const res = await fetch(API_URL, {\n        method: 'DELETE'\n      });\n      if (res.ok) {\n        setMessage('Discount deleted successfully');\n        setMonths([]);\n        setDiscount(null);\n      } else {\n        setMessage('Failed to delete discount');\n      }\n    } catch (err) {\n      console.error('Error deleting discount:', err);\n      setMessage('Error deleting discount');\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-3xl font-bold mb-6 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, \"Discount Settings\"), message && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-4 text-gray-700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 19\n    }\n  }, message), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-wrap gap-4 mb-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Seasonal Discount Months (comma separated)\",\n    value: months.join(', '),\n    onChange: e => handleInputChange('months', e.target.value),\n    className: \"border p-2 rounded w-1/2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    placeholder: \"Discount (%)\",\n    value: discount || '',\n    onChange: e => handleInputChange('discount', e.target.value),\n    className: \"border p-2 rounded w-1/2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSaveDiscount,\n    className: \"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, isNewDiscount ? 'Add Discount' : 'Save Changes'), months.length > 0 && discount != null && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleDeleteDiscount,\n    className: \"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, \"Delete Discount\")), months.length > 0 && discount != null && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"text-xl font-semibold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }, \"Current Seasonal Discount\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 14\n    }\n  }, \"Months:\"), \" \", months.join(', ')), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 14\n    }\n  }, \"Discount:\"), \" \", discount, \"%\")));\n}","map":{"version":3,"names":["React","useEffect","useState","DiscountSettings","months","setMonths","discount","setDiscount","message","setMessage","isNewDiscount","setIsNewDiscount","API_URL","fetchDiscountSettings","res","fetch","data","json","err","console","error","handleInputChange","field","value","split","map","month","parseInt","trim","handleSaveDiscount","length","alert","discountData","Number","method","headers","body","JSON","stringify","ok","handleDeleteDiscount","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","join","onChange","e","target","onClick"],"sources":["V:/Programming/Python/PyCharm/PyCharmProjects/Microservices_MMT/frontend/src/pages/DiscountSettings.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nexport default function DiscountSettings() {\r\n  const [months, setMonths] = useState([]);\r\n  const [discount, setDiscount] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n  const [isNewDiscount, setIsNewDiscount] = useState(false);\r\n  const API_URL = 'http://localhost:5003/admin/discount';\r\n\r\n  // Fetch discount settings on mount\r\n  useEffect(() => {\r\n    fetchDiscountSettings();\r\n  }, []);\r\n\r\n  const fetchDiscountSettings = async () => {\r\n    try {\r\n      const res = await fetch(API_URL);\r\n      const data = await res.json();\r\n      if (data.message) {\r\n        setMessage(data.message); // No discount set yet\r\n      } else {\r\n        setMonths(data.months || []);\r\n        setDiscount(data.discount || null);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error fetching discount settings:\", err);\r\n      setMessage('Error fetching discount settings.');\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    if (field === 'months') {\r\n      setMonths(value.split(',').map((month) => parseInt(month.trim(), 10)));\r\n    } else if (field === 'discount') {\r\n      setDiscount(value);\r\n    }\r\n  };\r\n\r\n  const handleSaveDiscount = async () => {\r\n    if (!months.length || !discount) {\r\n      alert('All fields are required');\r\n      return;\r\n    }\r\n\r\n    const discountData = {\r\n      months,\r\n      discount: Number(discount),\r\n    };\r\n\r\n    try {\r\n      const res = await fetch(API_URL, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(discountData),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setMessage(data.message);\r\n        setMonths(data.months);\r\n        setDiscount(data.discount);\r\n        setIsNewDiscount(false);\r\n      } else {\r\n        setMessage(data.error || 'Failed to update discount');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error saving discount:', err);\r\n      setMessage('Error saving discount');\r\n    }\r\n  };\r\n\r\n  const handleDeleteDiscount = async () => {\r\n    try {\r\n      const res = await fetch(API_URL, { method: 'DELETE' });\r\n      if (res.ok) {\r\n        setMessage('Discount deleted successfully');\r\n        setMonths([]);\r\n        setDiscount(null);\r\n      } else {\r\n        setMessage('Failed to delete discount');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error deleting discount:', err);\r\n      setMessage('Error deleting discount');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h2 className=\"text-3xl font-bold mb-6 text-center\">Discount Settings</h2>\r\n\r\n      {message && <div className=\"mb-4 text-gray-700\">{message}</div>}\r\n\r\n      {/* Discount Form */}\r\n      <div className=\"flex flex-wrap gap-4 mb-6\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Seasonal Discount Months (comma separated)\"\r\n          value={months.join(', ')}\r\n          onChange={(e) => handleInputChange('months', e.target.value)}\r\n          className=\"border p-2 rounded w-1/2\"\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          placeholder=\"Discount (%)\"\r\n          value={discount || ''}\r\n          onChange={(e) => handleInputChange('discount', e.target.value)}\r\n          className=\"border p-2 rounded w-1/2\"\r\n        />\r\n        <button\r\n          onClick={handleSaveDiscount}\r\n          className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n        >\r\n          {isNewDiscount ? 'Add Discount' : 'Save Changes'}\r\n        </button>\r\n        {months.length > 0 && discount != null && (\r\n          <button\r\n            onClick={handleDeleteDiscount}\r\n            className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700\"\r\n          >\r\n            Delete Discount\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Existing Discount Display */}\r\n      {months.length > 0 && discount != null && (\r\n        <div className=\"mt-6\">\r\n          <h3 className=\"text-xl font-semibold\">Current Seasonal Discount</h3>\r\n          <p><strong>Months:</strong> {months.join(', ')}</p>\r\n          <p><strong>Discount:</strong> {discount}%</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}